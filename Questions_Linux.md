# Общая архитектура операционной системы
1. **Ядро операционной системы (Kernel)** - основная часть операционной системы, которая управляет ресурсами компьютера и обеспечивает выполнение программ. Ядро ОС отвечает за планирование процессов, управление памятью, управление устройствами ввода/вывода и другие базовые функции.
2. **Драйверы устройств (Device Drivers)** - программы, которые позволяют операционной системе взаимодействовать с аппаратным обеспечением компьютера, таким как принтеры, сканеры, видеокарты и т.д. Драйверы обеспечивают согласованное взаимодействие между аппаратным и программным обеспечением.
3. **Подсистемы операционной системы** - например, файловая система, сетевая подсистема, подсистема безопасности и другие. Каждая подсистема отвечает за определенные функции операционной системы и обеспечивает пользователю доступ к определенным возможностям.
4. **Интерфейс пользователя** - пользовательский интерфейс операционной системы, через который пользователи могут взаимодействовать с компьютером. Это может быть графический интерфейс (GUI) или командная строка (CLI).
5. **Системные утилиты** - программы, предназначенные для облегчения управления и настройки операционной системы, такие как диспетчер задач, дефрагментатор диска, антивирусные программы и т.д.
Общая архитектура операционной системы предоставляет основу для работы компьютера, обеспечивая управление ресурсами, безопасность данных, удобство использования и многое другое.
---
# Основное предназначение операционной системы
Операционная система (ОС) - это программное обеспечение, которое управляет ресурсами компьютера и обеспечивает выполнение программ. Основное предназначение операционной системы включает в себя:
1. **Управление ресурсами** - ОС управляет доступом к ресурсам компьютера, таким как центральный процессор (CPU), оперативная память (RAM), жесткий диск, периферийные устройства и прочее. Она осуществляет планирование задач, распределение ресурсов и контроль работы устройств.
2. **Поддержка выполнения программ** - ОС обеспечивает среду, в которой программы могут запускаться, работать и взаимодействовать друг с другом. Она предоставляет программам доступ к аппаратным ресурсам компьютера и управляет их выполнением.
3. **Обеспечение безопасности** - ОС защищает компьютер от вредоносных программ, контролирует доступ пользователей к данным и ресурсам, обеспечивает защиту конфиденциальности информации и обеспечивает целостность системы.
4. **Управление файлами и данными** - ОС предоставляет средства для создания, хранения, организации и управления файлами и данными на компьютере. Это включает в себя работу с файловой системой, управление доступом к файлам и резервное копирование данных.
5. **Предоставление пользовательского интерфейса** - ОС обеспечивает способ взаимодействия пользователя с компьютером, будь то через графический интерфейс (GUI) или командную строку (CLI). Пользовательский интерфейс позволяет пользователям запускать программы, управлять файлами, настраивать систему и выполнять другие задачи.
Операционная система играет ключевую роль в работе компьютера, обеспечивая его стабильную и эффективную работу, удобство использования и безопасность данных.

---
# Порядок загрузки дистрибутива Linux

1. Включение компьютера кнопкой.
2. Загрузить BIOS / UEFI из NVRAM.
	- `BIOS + MBR`(базовая система ввода-ввывода) / `UEFI + GPT` (реинкарнация BIOS - основные отличия, работает в 32-битном и 64-битном режиме, поддерживает таблицу разделов GPT, может иметь красивый графический интерфейс, оболочку EFI Shell и управление мышью): 
	- `NVRAM (Non-Volatile Random Access Memory)` - это тип памяти компьютера, который сохраняет данные даже после выключения питания. Он сочетает в себе свойства оперативной (RAM) и постоянной (ROM) памяти. NVRAM обычно используется для хранения настроек BIOS/UEFI, таких как дата и время компьютера, порядок загрузки устройств и другие параметры конфигурации системы. Имея свойство не сбрасывать данные при отключении питания, NVRAM обеспечивает сохранение этих важных настроек для последующего использования при каждом включении компьютера.
	- `MBR (Master Boot Record)` - это основная загрузочная запись, которая находится в начале жёсткого диска на компьютере. MBR содержит информацию о разделах на диске и код, который позволяет компьютеру загрузить операционную систему с этого жёсткого диска. MBR играет ключевую роль в процессе загрузки операционной системы и является одним из первых элементов, который компьютер читает при включении.
	- GPT (GUID Partition Table) - это новый стандарт для разделения и разметки дисков. В отличие от MBR, который имеет ограничение на количество разделов и размер диска до 2TB, GPT позволяет более гибкое управление дисками, поддерживает большие диски и имеет более надёжные механизмы проверки целостности данных. Также GPT использует уникальные идентификаторы для разделов, что делает их более устойчивыми к ошибкам и повреждениям.GPT также обеспечивает более надёжную защиту данных и имеет механизмы для обнаружения и восстановления поврежденных данных.
1. Собрать сведения об аппаратуре. BIOS/UEFI производит POST (Power-On Self Test), инициализирует аппаратное обеспечение и находит загрузчик ОС.
2. Выбрать устройства для запуска (диск, сеть).
4. Идентифицировать системный раздел EFI.
5. Загрузить BIOS / UEFI из NVRAM.
6. Определить какое ядро загрузить.
7. Загрузить ядро.
8. Создать структуры данных ядра.
9. Запустить init / systemd как PID 1.
10. Выполнить сценарии запуска.
11. Запустить систему.

---
# Какую команду необходимо выполнить, чтобы посмотреть какие пользователи вошли в систему в систему?

```
w
```

---
# Какой файл необходимо отредактировать, чтобы отключить ssh аутентификацию по паролю?

Необходимо редактировать файл `/etc/ssh/sshd_config`, отвечающий за конфигурацию сервиса ssh.


---
# Зачем нужны файловые системы? Какие существуют?

Файловые системы необходимы для организации, хранения и управления файлами и данными на компьютере или другом устройстве. Они определяют способ, в котором данные организованы и доступны для программ и пользователей. Файловые системы позволяют хранить файлы, определять их размещение на диске, обеспечивать доступ к ним, контролировать права доступа и обеспечивать безопасное управление данными.  
  
Существует много различных типов файловых систем, каждая из которых имеет свои особенности и преимущества. Некоторые из наиболее распространенных файловых систем включают:  
  1. **FAT (File Allocation Table)** - одна из старейших файловых систем, проста и поддерживается большинством операционных систем. FAT используется на флеш-накопителях, но имеет ограничения по размеру файлов и разделов.  
  2. **NTFS (New Technology File System)** - разработана компанией Microsoft для операционных систем Windows. NTFS поддерживает большие файлы, надежность данных, шифрование и другие продвинутые функции.  
  3. **exFAT (Extended File Allocation Table)** - разработана также компанией Microsoft для поддержки больших файлов и накопителей с большим объемом. exFAT хорошо подходит для флеш-накопителей и внешних жестких дисков.  
  4. **HFS+ (Hierarchical File System Plus)** - файловая система, используемая на устройствах с операционной системой macOS. HFS+ обеспечивает эффективное управление файлами и поддерживает функции, оптимизированные для работы с устройствами Apple.  
  5. **EXT4 (Fourth Extended File System)** - это файловая система, применяемая в операционной системе Linux. EXT4 обеспечивает хорошую производительность, надежность и поддерживает большие файлы и разделы.  
  
Каждая файловая система имеет свои особенности и преимущества, и выбор определенной зависит от конкретных потребностей и требований пользователей.

---
# Что такое inode?

Inode - это структура данных в файловых системах Unix, которая содержит метаданные о файле или каталоге, такие как размер файла, права доступа, временные метки, номер блока данных и другую информацию. Он используется операционной системой для отслеживания и управления файлами и каталогами. Каждый файл или каталог на файловой системе имеет свой собственный inode. Надеюсь, это объяснение помогло вам понять понятие inode!

---
# Чем отличаются файловые системы: btrfs, ext2, ext3, ext4, ext4dev, f2fs, lvm, ocfs2, reiserfs, xfs, vfat, swap.
1. **btrfs**: Btrfs (B-tree file system) является современной файловой системой, которая поддерживает копирование на запись, снимки, сжатие и восстановление данных. Она обладает хорошей отказоустойчивостью и хорошо подходит для использования в серверных средах.
2. **ext2**: Ext2 (Second Extended File System) - простая и надежная Linux-файловая система без журналирования. Она используется по умолчанию во многих дистрибутивах Linux.
3. **ext3**: Ext3 (Third Extended File System) является развитием Ext2 с добавлением журналирования файловой системы для повышения отказоустойчивости.
4. **ext4**: Ext4 (Fourth Extended File System) - это современная версия Ext-семейства файловых систем, которая ориентирована на повышение производительности и надежности по сравнению с Ext3.
5. **f2fs**: F2FS (Flash-Friendly File System) разработана для работы на устройствах с флэш-памятью, таких как SSD-накопители. Она оптимизирована для повышения скорости и продолжительности жизни флэш-памяти.
6. **xfs**: XFS - высокопроизводительная файловая система, хорошо подходящая для крупных файлов и быстрой работы с ними. Она обладает хорошей масштабируемостью и отказоустойчивостью.
7. **vfat**: VFAT (Virtual File Allocation Table) - это файловая система, используемая в Windows для совместимости с устройствами, работающими под управлением DOS и Windows.
---
# Какова файловая структура в Linux (UNIX) системах, расположенных в /etc, /dev, /proc, /sys, /lib, /var ?
file_structure = {

    '/etc': 'Каталог etc содержит конфигурационные файлы системы.',
    
    '/dev': 'Каталог dev содержит специальные файлы устройств, представляющие оборудование и другие устройства в системе.',

    '/proc': 'Каталог proc содержит информацию о запущенных процессах и текущей конфигурации ядра в виде файлов и каталогов.',

    '/sys': 'Каталог sys является виртуальной файловой системой, предоставляющей информацию о состоянии ядра и оборудования.',

    '/lib': 'Каталог lib содержит важные системные библиотеки, необходимые для работы программ в системе.',

    '/var': 'Каталог var содержит переменные данные, например, журналы системы, временные файлы, почту и многое другое.'
}

---
# Где хранятся имена файлов/директорий?

- Inodes не содержат имён файлов, только другие метаданные файла.
- Каталоги Unix представляют собой списки ассоциативных структур, каждая из которых содержит одно имя файла и один номер индекса.
- Драйвер файловой системы должен найти каталог, ищущий определенное имя файла, а затем преобразовать имя файла в правильный соответствующий номер индекса.

 [![Структура каталогов](https://github.com/rmntrvn/adm_linux_ops_questions/raw/master/questions/imgs/inf_struct_catalogs.gif)](https://github.com/rmntrvn/adm_linux_ops_questions/blob/master/questions/imgs/inf_struct_catalogs.gif)
 Таким образом имя файла/директории хранится в информационной структуре каталогов.

---
# Как удалить файл с именем `-rf`?

```
rm ./-rf
```
---
# Что такое файл в понятиях Unix-like операцинных системах?

Файлы - это объекты, в которые мы записываем информацию и наши данные, исполняемые файлы, но кроме этих привычных нам понятий здесь есть файлы специального назначения - файлы устройств, файлы туннелей, сокетов и многое другое.

Типы файлов в Linux:

- Обычные файлы, для хранения информации;
- Специальные файлы - для устройств и туннелей;
- Директории.

---
# Как работают file permissions, зачем директории права исполнения (+x)?

File permissions - это способ управления доступом к файлам и директориям в операционных системах Unix и подобных им. У каждого файла или директории есть установленные права доступа, которые определяют, кто может просматривать, редактировать или запускать их.  
  
File permissions обычно состоят из трех частей: прав доступа для владельца файла, группы и остальных пользователей. Каждая часть может иметь различные разрешения: чтение (r), запись (w) и выполнение (x).  
  
Теперь о директориях и правах исполнения. Права исполнения для директории (+x) позволяют пользователю выполнять эту директорию, то есть переходить в нее и просматривать содержимое. Без права исполнения пользователь не сможет просматривать содержимое директории или выполнять операции в ней, даже если у него есть права на чтение файлов внутри.  
  
Таким образом, установка права исполнения на директорию важна для того, чтобы пользователь мог перемещаться по структуре каталогов и просматривать содержимое директории. Это помогает в удобной навигации по файловой системе и выполнении необходимых задач.


---
# Что такое файловый дескриптор? Какая информация там хранится?

_Файловый дескриптор_ - неотрицательное целое число, которое используется в интерфейсе между пространством пользователя и пространством ядра (kernel) для идентификации ресурсов файла / сокета. Когда создаётся новый поток ввода-вывода, ядро возвращает процессу, создавшему поток ввода-вывода, его файловый дескриптор.

---

# Как посмотреть описание дискриптора? Как посмотреть время последней модификации файла?

Посмотреть полную информацию по дискриптору возможно командой `stat <path_to_file>`. Время модификации:
```
stat --format=%y dira
```
---
# Для чего нужна переменная окружения PATH?

 Переменная окружения PATH содержит абсолютные пути директорий, в которых производится поиск исполняемых файлов при вводе команд 
 
---
# В чем разница между объявлением переменной `export VAR="VALUE"` и `VAR="VALUE"` в bash?

При объявлении переменной через export - переменная будет доступна в любых других процессах, при обычном объявлении переменной - переменная будет доступна только в запущенном процессе.


---
# В чем разница между soft и hard symlink?

Разница между soft (Symbolic) и hard (Hard link) ссылками в UNIX-подобных системах вот в чем: 
1. Soft symlink: это просто файл, который содержит путь к другому файлу или директории. Если целевой файл перемещается или удаляется, то soft symlink перестает указывать на него и становится битым. Он похож на ярлык в Windows.

2. Hard symlink: это прямая ссылка на индексный дескриптор (i-node) другого файла в файловой системе. Если целевой файл перемещается или удаляется, то hard link все еще будет указывать на данные файла. Hard links нельзя создавать для директорий и могут быть созданы только в пределах одной файловой системы.

**Hard link**: Ссылка на файл в файловой системе с использованием такого же inode идентификатора, как у файла, на который ссылаемся. Создадим файл _realFile_.

```
touch realFile
```

Создадим hard link командой `ln <целевой_файл> <файл_ссылка>`:

```
ln realFile hardLink
```

Проверим, что inode у файла _realFile_ и hard ссылке _hardLink_ имеют одинаковый идентификатор.

```
$ ls -li
итого 0
2359720 -rw-r--r-- 2 rmntrvn rmntrvn 0 апр 25 23:24 hardLink
2359720 -rw-r--r-- 2 rmntrvn rmntrvn 0 апр 25 23:24 realFile
```

Как видно realFile и hardLink имеют одинаковый идентификатор inode.

**Soft link**: Создадим soft ссылку на файл _realFile_.

```
ln -s realFile softLink
```

Проверим, что чистовой идентификатор _softLink_ отличается от числового идентификатора _realFile_.

```
$ ls -li
итого 0
2359720 -rw-r--r-- 2 rmntrvn rmntrvn 0 апр 25 23:24 hardLink
2359720 -rw-r--r-- 2 rmntrvn rmntrvn 0 апр 25 23:24 realFile
2366763 lrwxrwxrwx 1 rmntrvn rmntrvn 8 апр 25 23:29 softLink -> realFile
```

Некоторые нюансы:

- Soft ссылки используют различные номера inode, чем основные файлы.
    
- Soft ссылки становятся полезными, если исходный файл был удален.
    
- Soft ссылки могут быть созданы из каталогов.
    
- Soft ссылка может быть создана на пересечении файловых систем.
    
- Hard ссылка может размещаться только на том же логическом разделе, что и оригинальный файл. Это связано с независимой идентификацией файлов на разных разделах.
    
- Создание жестких ссылок не поддерживается для папок — только для файлов.
    
- Файловая система должна поддерживать работу с hard ссылками.

---
Какие состояния процессов существуют? Что значит состояние процесса D?

|                   **Статус**                   |              **Описание**               |
| :--------------------------------------------: | :-------------------------------------: |
|            R (running or runnable)             |   Выполняется или готов к выполнению    |
|           D (uninterruptible sleep)            |         Ожидает записи на диск          |
|            S (interruptible sleep)             |           Неактивен (< 20 s)            |
|       T (stopped by job control signal)        | Остановлен или трассируется отладчиком  |
|                   Z (zombie)                   |                  зомби                  |
| W (paging (not valid since the 2.6.xx kernel)) |        Процесс выгружен на диск         |
|                       <                        | Процесс имеет повышенный приоритет nice |
|                       N                        | Процесс имеет пониженный приоритет nice |
|                   L (locked)                   |  Некоторые страницы блокированы в ядре  |
|                       s                        |     Процесс является лидеров сеанса     |

---
# Что такое процесс-зомби и процесс-сирота? Можно ли самостоятельно сделать зомби?

_Процесс-зомби_ - дочерний процесс в Unix-системе, завершивший своё выполнение, но ещё присутствующий в списке процессов операционной системы, чтобы дать родительскому процессу считать код завершения.

Удаление зомби возлагается на родительский процесс или системный вызов `wait()` также может это выполнить, поэтому перед ее вызовом не нужно проверять, продолжает ли выполняться требуемый дочерний процесс. Если родительский процесс не удалит своих потомков, то они останутся в состоянии зомби.

Убить зомби-процесс невозможно. Чтобы убить зомби-процесс нужно найти родительский процесс и завершить его или перезапустить. Найти зомби-процессы и их родителей можно следующей командой:

```
ps ajx | grep -w Z
```

PID'ы процессов родителей в 3 колонке. Убить процесс следующей командой:

```
kill -9 <PID процесса родителя>
```

_Процесс-сирота_ — в семействе операционных систем UNIX вспомогательный процесс, чей основной процесс (или связь с ним) был завершен нештатно (не подав сигнала на завершение работы).

Отличие в том, что процесс-сирота (orphan process) всё еще активен. Его родительский процесс был по какой-либо причине прерван, и сирота теперь переходит под руководство init, чей ID процесса равен 1. PPID orphan процесса получит значение 1. Пользователь также может создать подобный процесс, отсоединив его от терминала. Сиротские процессы используют много ресурсов, их легко найти с помощью top или htop.

В отличии от процесса-сироты, зомби-процесс неактивен, но контролируется родительским процессом, пока тот не решит, что статус выхода дочерних процессов больше не нужен. Он не использует ресурсы и не может быть запланирован для выполнения. Иногда родительский процесс удерживает дочерний процесс в состоянии зомби, чтобы гарантировать, что будущие дочерние процессы не получат тот же PID. Если вы уничтожите родителя зомби-процесса, зомби-процесс тоже умрет. Для этого найдите родительский PID (PPID) зомби и отправьте ему сигнал SIGCHLD (17): kill -17 ppid.

---
# При помощи каких механизмов могут общаться процессы в операционной системе?

| **Метод**                                                                                                                                                                                                                         | **Реализуется** [**ОС**](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система") **или** [**процессом**](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0) "Процесс (информатика)")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Файл](https://ru.wikipedia.org/wiki/%D0%A4%D0%B0%D0%B9%D0%BB "Файл")                                                                                                                                                             | Все [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [Сигнал](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%B3%D0%BD%D0%B0%D0%BB%D1%8B_(UNIX) "Сигналы (UNIX)")                                                                                                                        | Большинство [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"); в некоторых [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"), например, в [Windows](https://ru.wikipedia.org/wiki/Windows "Windows"), сигналы доступны только в библиотеках, реализующих [стандартную библиотеку языка Си](https://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%B0%D1%8F_%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0_%D1%8F%D0%B7%D1%8B%D0%BA%D0%B0_%D0%A1%D0%B8 "Стандартная библиотека языка Си"), и не могут использоваться для IPC.                                                                                                                                                                                                                                                                     |
| [Сокет](https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D0%BA%D0%B5%D1%82_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81) "Сокет (программный интерфейс)") | Большинство [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [Канал](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BD%D0%B2%D0%B5%D0%B9%D0%B5%D1%80_(UNIX) "Конвейер (UNIX)")                                                                                                                  | Все [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"), совместимые со стандартом [POSIX](https://ru.wikipedia.org/wiki/POSIX "POSIX").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [Именованный канал](https://ru.wikipedia.org/wiki/%D0%98%D0%BC%D0%B5%D0%BD%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB "Именованный канал")                                                          | Все [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"), совместимые со стандартом [POSIX](https://ru.wikipedia.org/wiki/POSIX "POSIX").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [Неименованный канал](https://ru.wikipedia.org/wiki/%D0%9D%D0%B5%D0%B8%D0%BC%D0%B5%D0%BD%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB "Неименованный канал")                                          | Все [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"), совместимые со стандартом [POSIX](https://ru.wikipedia.org/wiki/POSIX "POSIX").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [Семафор](https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D0%BC%D0%B0%D1%84%D0%BE%D1%80_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0) "Семафор (информатика)")                                                  | Все [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"), совместимые со стандартом [POSIX](https://ru.wikipedia.org/wiki/POSIX "POSIX").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [Разделяемая память](https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D1%8F%D0%B5%D0%BC%D0%B0%D1%8F_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D1%8C "Разделяемая память")                                                  | Все [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"), совместимые со стандартом [POSIX](https://ru.wikipedia.org/wiki/POSIX "POSIX").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [Обмен сообщениями](https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D0%BC%D0%B5%D0%BD_%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F%D0%BC%D0%B8 "Обмен сообщениями")  <br>(без разделения)                                    | Используется в парадигме [MPI](https://ru.wikipedia.org/wiki/Message_Passing_Interface "Message Passing Interface"), [Java](https://ru.wikipedia.org/wiki/Java "Java") [RMI](https://ru.wikipedia.org/wiki/RMI "RMI"), [CORBA](https://ru.wikipedia.org/wiki/CORBA "CORBA") и других.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [Проецируемый в память файл](https://ru.wikipedia.org/wiki/Mmap "Mmap") (mmap)                                                                                                                                                    | Все [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система"), совместимые со стандартом [POSIX](https://ru.wikipedia.org/wiki/POSIX "POSIX"). При использовании [временного файла](https://ru.wikipedia.org/wiki/%D0%92%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D1%84%D0%B0%D0%B9%D0%BB "Временный файл") возможно возникновение [гонки](https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_%D0%B3%D0%BE%D0%BD%D0%BA%D0%B8 "Состояние гонки"). [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система") [Windows](https://ru.wikipedia.org/wiki/Windows "Windows") также предоставляет этот механизм, но посредством [API](https://ru.wikipedia.org/wiki/API "API"), отличающегося от [API](https://ru.wikipedia.org/wiki/API "API"), описанного в стандарте [POSIX](https://ru.wikipedia.org/wiki/POSIX "POSIX"). |
| [Очередь сообщений](https://ru.wikipedia.org/wiki/%D0%9E%D1%87%D0%B5%D1%80%D0%B5%D0%B4%D1%8C_%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B9 "Очередь сообщений") (Message queue)                                          | Большинство [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [Почтовый ящик](https://ru.wikipedia.org/wiki/Mailslot "Mailslot")                                                                                                                                                                | Некоторые [ОС](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |

---
# Что такое сигнал в Unix, зачем они нужны и разница между 9 и 15 сигналами?

Сигнал - в Unix-like операционных системах - асинхронное (в случайное время) уведомление процесса для обработки какого-либо события. Один из основных способов взаимодействия между процессами.

Посылка сигналов от одного процесса к другому обычно осуществляется при помощи системного вызова _kill_. Его первый параметр – PID процесса, которому посылается сигнал; второй параметр – номер сигнала.

```
kill(1111, SIGTERM);
```

Стандарт POSIX определяет 28 сигналов. Некоторые из них:

| Сигнал  | Код | Описание                                                 |
| ------- | --- | -------------------------------------------------------- |
| SIGTERM | 15  | Сигнал завершения (сигнал по умолчанию для утилиты kill) |
| SIGKILL | 9   | Безусловное завершение                                   |
| SIGSTOP | 23  | Остановка выполнения процесса                            |
| SIGHUP  | 1   | Закрытие терминала (перечитать конфигурацию)             |
| SIGINT  | 2   | Сигнал прерывания (Ctrl-C) с терминала                   |

---
# Какой код сигнала будет выполнен при исполнении команды `kill <PID>`?

Сигнал SIGTERM (код 15) - это сигнал по-умолчанию отправляемый при вызове команды kill. Это указывает процессу на завершение работы и обычно считается сигналом для использования при чистом завершении работы.

---
# Что такое системный вызов, какие они бывают?

Системный вызов - обращение программы к ядру операционной системы для выполнения какой-либо операции.

В Unix, Unix-like и других POSIX-совместимых операционных системах популярными системными вызовами являются:

- open,
- read,
- write,
- close,
- wait,
- exec,
- fork,
- exit,
- kill.

---
# С помощью чего можно собрать информацию о текущем состоянии процессора, памяти, диска, сети?

top, htop - посмотреть информацию о процессах и процессоре, а также утилитой sysstat
top, htop, free - посмотреть информацию о памяти
df - общий просмотр объема информации на дисках, du поиск занятого места, sysstat
ifconfig, ip, ping, netstat, nmap

---

# Что такое buffer/cache память? Для чего нужна?

buff/cache память - рассчитанная память, которая зарезервирована, но может быть освобождена при необходимости и используется для быстрого доступа программами к данным, которые находятся в оперативной памяти (быстрой памяти).

buffers — буферы в памяти — страницы памяти, зарезервированные системой для выделения их процессам, когда они затребуют этого, так же известна как heap-memory; cached — файлы, которые недавно были использованы системой/процессами и хранящиеся в памяти на случай если вскоре они снова потребуются.

---
# Представлен вывод команды `free`.

```
$ free -m
              total        used        free      shared  buff/cache   available
Mem:           6930        3598         843         183        2489        2919
Swap:         15999           4       15995
```

Почему доступной (available) памяти сейчас 2919, если свободной (free) памяти 843?


- Total. Эта цифра представляет всю существующую память.
- Used вычисление общего значения оперативной памяти системы за вычетом выделенной свободной, разделяемой, буферной и кэш-памяти.

```
used = total - free - buff/cache
```
- Free – свободная память в системе.
- Shared – память, используемая (преимущественно) в tmpfs
- Buffer, и Cache идентифицируют память, используемую для нужд ядра / операционной системы. Буфер и кеш складываются вместе, а сумма указывается в разделе «buff/cache».
- Available – примерное количество оперативной памяти, доступное для запуска новых приложений без использования ими раздела подкачки. В отличие от поля free, это поле принимает в расчёт страницу cache и также то, что не вся рекуперируемая (пригодная для повторного использования) память будет возвращена для рекуперации из-за того, что элементы используются в данный момент.
---
# Что такое swappiness?

Swappiness — это параметр, определяющий то, насколько часто ядро Linux будет использовать обмен (swap space) вместо оперативной памяти (RAM). Чем выше значение swappiness, тем скорее ядро будет передавать неиспользуемые данные из оперативной памяти на жесткий диск (swap space).  
  
Значение по умолчанию для swappiness обычно составляет `60`. Уменьшение этого значения может снизить вероятность использования обмена, что может быть полезно для ускорения работы системы, при этом больше используя доступную оперативную память. Однако, повышение swappiness может быть полезным в ситуациях, когда на вашей системе часто происходит переполнение оперативной памяти.  
  
Можно изменить значение swappiness, отредактировав файл конфигурации `/etc/sysctl.conf` и добавив или изменяя строку vm.swappiness. Настройка swappiness может помочь оптимизировать использование оперативной памяти и улучшить общую производительность системы Linux.

Чтобы проверить текущее значение параметра swappiness, можно воспользоваться командой `sysctl` в терминале. Просто введите следующую команду:  
```
sysctl vm.swappiness
```
После выполнения этой команды вы увидите текущее значение swappiness на вашей системе. Если хотите изменить значение swappiness, как я упомянула ранее, то вам нужно будет отредактировать файл конфигурации `/etc/sysctl.conf`.

---

# В каком файле находится информация о смонтированных каталогах в файловую систему?

Файл `/etc/fstab` содержит информацию о смонтированных каталогах в файловую систему.

---

# Что означают параметры в файле /etc/fstab
UUID=205feeee-1f02-4617-8932-3d4b0a8f2cc7 /var/log/rsyslog/ ext4 rw 0 1

1. **UUID=205feeee-1f02-4617-8932-3d4b0a8f2cc7**: Это уникальный идентификатор (UUID) файловой системы, которая должна быть смонтирована. Вместо использования пути к устройству, здесь используется UUID для идентификации конкретного раздела.
2. **/var/log/rsyslog/**: Это путь к точке монтирования, куда будет смонтирована указанная файловая система. В данном случае, файловая система будет смонтирована в каталог /var/log/rsyslog/.
3. **ext4**: Это тип файловой системы, который будет смонтирован. В данном случае, это ext4 - распространенный тип файловой системы в Linux.
4. **rw**: Это опции монтирования, где "rw" означает, что файловая система будет смонтирована с правами на чтение и запись (read-write).
5. **0**: Этот параметр указывает, будет ли производиться проверка файловой системы при загрузке. В данном случае, 0 означает отсутствие проверки.
6. **1**: Этот параметр указывает на порядок, в котором файловые системы будут проверяться при загрузке. В данном случае, 1 означает, что данная файловая система будет проверяться после того, как все файловые системы с параметром 0 будут проверены.
Все эти параметры определяют, как будет производиться монтирование указанной файловой системы при каждой загрузке системы.

---
# Что такое Load Average?
LA (load average) -- параметр, определяющий среднюю нагрузку на систему за период времени (1 мин, 5 минут, 15 минут). Измеряется в количестве задач на одно ядро процессора. На нагрузку системы также влияет количество задач ввода-вывода и задержка сети. Также влияние на расчета LA оказывает: 1. Технология Hyper-Threading, которая делит одно физическое ядро на 2 логических, 2. Технология Turbo Bust, которая позволяет разгонять тактовую частоту процессора и работать на частоте выше заявленной, т.е. выше номинальной частоты (время на обработку одной задачи уменьшается).

## Что будет если на сервере LA = 100?
Вероятно, что на сервере будет наблюдаться замедленная работа сервисов, но если параметр LA равен количеству ядер в системе или количеству потоков в системе, то данная нагрузка является нормальной.

## Почему при высоких показателях значения LA на сервере может не наблюдаться проблем (консоль ssh отзывается, сервисы работают в обычном режиме)?

На параметр нагрузки LA влияет также и ожидание ввода-вывода (параметр _wa_ в утилите _top_) в дисков и задержка сети. Данные параметры могут не влиять на работу основных сервисов в системе, но учитываются при расчете общей нагрузки на систему.

---
# Представлен вывод команды _top_. Что означает каждая запись в выводе?
`top - 21:29:24 up 14:18,  1 user,  load average: 0,78, 1,48,   1,10`
`Tasks: 277 total,   3 running, 274 sleeping,   0 stopped,      0 zombie`
`%Cpu(s): 12,4 us,  2,5 sy,  0,1 ni, 84,8 id,  0,1 wa,  0,0   hi,  0,1 si,  0,0 st`
`KiB Mem :  7106404 total,   306972 free,  3127144 used,    3672288 buff/cache`
`KiB Swap:  8191996 total,  8191996 free,        0 used.    3270520 avail Mem`
_top_ - название утилиты.
_21:29:24_ - текущее время системы.
_up 14:18_ - сколько часов:минут система работает с момента последнего запуска.
_1 user_ - количество пользователей авторизованных в системе.
_load average: 0,78, 1,48, 1,10_ - параметр средней нагрузки на систему за период времени 1 минута, 5 минут, 15 минут.
_277 total_ - всего процессов в системе.
_3 running_ - количество процессов в работе.
_274 sleeping_ - количество процессов в состоянии sleeping: ожидает какого-либо события или сигнала.
_0 stopped_ - количество приостановленных процессов сигналом STOP или выполнением трассировки.
_0 zombie_ - количество зомби-процессов, которые завершили своё выполнение, но присутствующие в системе, чтобы дать родительскому процессу считать свой код завершения.

---
##  Как в утилите top в Linux посмотреть нагрузку на каждое ядро процессора?

В утилите top нажать `1`, чтобы отобразить все ядра в системе.

---
#  Как в утилите top в Linux посмотреть какой командой был запущен процесс?

В утилите top нажать `c`, чтобы отобразить команды, которыми были запущены процессы.

---
# Как посмотреть нагрузку на диски?

Установить утилиту `sysstat`, проверить нагрузку на диски `iostat -xtc`.

---
# Что такое RAID? Какие массивы бывают?

RAID (Redundant Array of Independent Disks) - избыточный массив независимых дисков, технология виртуализации данных для объединения нескольких физических дисковых устройств в логический модуль для повышения отказоустойчивости и производительности.

В зависимости от количества дисков и класса отказоустойчивости существуют следующие основные типы RAID: RAID 0: RAID 1: RAID 5: RAID 6: RAID 10:

## При каком количестве одновременно вышедших из строя дисков обеспечивает работоспособность RAID 6?

2 диска.

---

# Что такое grep ?
grep - это утилита командной строки в Unix-подобных операционных системах, которая используется для поиска текста в файлах. Название "grep" происходит от команды ed (редактор текстового файла), которая имела следующий синтаксис: g/re/p (поиск текста, соответствующего регулярному выражению, и печать строк).
С помощью утилиты grep можно искать строки, содержащие определенный текст или соответствующие определенному шаблону (регулярному выражению), в одном или нескольких файлах. Кроме того, grep позволяет работать с выводом других команд, фильтруя его для поиска нужной информации.
grep является мощным инструментом для обработки текстовых данных в командной строке и широко используется для поиска, фильтрации и обработки текста в Unix-системах.

## Чем отличает grep от grep расширенного?

Отличие между grep и egrep (расширенным grep) заключается в поддержке регулярных выражений. 
grep использует базовые регулярные выражения (Basic Regular Expressions - BRE), в то время как egrep использует расширенные регулярные выражения (Extended Regular Expressions - ERE).
Расширенные регулярные выражения в egrep имеют дополнительные возможности, такие как использование квантификаторов (+, ?, {}), альтернатив (символ |), специальных метасимволов (например, () для группировки), и других расширенных функций.
Таким образом, если вам нужно использовать более сложные шаблоны поиска с расширенными возможностями, то лучше воспользоваться egrep (или grep -E, что эквивалентно), а если вам подходят базовые регулярные выражения, то можно использовать просто grep.

## Чем отличаются базовые регулярные выражения от расширенных?

Базовые регулярные выражения:
1. Метасимволы . [ ] ^ $
2. Специальные символы * + ?  { } | ( )
3. Наборы символов [a-z] [0-9] [^a-z]
4. Квантификаторы * + ?
5. Символы n t
6. Классы символов [[:alpha:]] [[:digit:]] и т.д.

Расширенные (extended) регулярные выражения:
1. Все функции базовых регулярных выражений +
2. Специальные символы { } для определения количества повторений
3. Метасимволы | и ( )
4. Специальный символ ? для неполного совпадения
5. Начало строки ^ и конец строки $
Расширенные регулярные выражения обычно более мощные и гибкие, поэтому их чаще используют для более сложных поисковых запросов. Но при этом нужно помнить, что поддержка расширенных регулярных выражений может различаться в зависимости от программы или языка программирования, поэтому важно всегда проверять документацию перед использованием.

---
# Как остановить выполнение скрипта в bash при возникновении ошибки в команде?

Команда `set -e` завершит скрипт с ошибкой, в случае, если в нижеследующем bash коде будет обнаружена ошибка. По-умолчанию bash скрипт продолжает работу, если в ходе выполнения возникла ошибка.

Что в bash скрипте означает команда `set -euo pipefail`?

Команда `set` устанавливает аттрибуты оболочки с опеределенных опций. Опция `-e` - означает, что скрипт будет остановлен, когда произойдет ошибка в ходе его выполнения. Опция `-u` - означает, что скрипт будет остановлен, если в ходе скрипта, будет обнаружена переменная, которая не определена. Опция `-o pipefail` - означает, что скрипт будет остановлен, если в ходе пайплайна команд будет выявлена ошибка.

---
# Как активировать debug режим в bash?

Команда `set -x` в начале скрипта активирует вывод в консоль debug информации.

---
# Что значит `$@` в bash?

`$@` - все параметры переданные скрипту.

---
# Как выполнить фильтрацию вывода команды, чтобы на экран были выведены только ошибки (STDERR), игнорируя STDOUT?

```
cmd 2>&1 >/dev/null | grep pattern
```

---
# Что выведет команда `cat a` и почему?
```
mkdir /tmp/abc
cd /tmp/abc
ls >a 2>b
cat a
```

`cat a` выведет

```
a
b
```

Обработка команды идёт справа налево. Сначала создается файл _b_, потом создается файл _a_, команда `ls` отображает список файлов в текущей директории (файлы _a_ и _b_ уже созданы) в одну колонну и перенаправляет стандартный поток вывода (`>`) в файл _a_, а стандартный поток ошибок `2` в файл _b_.

---
# В bash-скрипте указан аттрибут оболочки `set -x`. В одной из команд происходит ошибка и скрипт завершает свою работу. Как сделать, чтобы при возникновении ошибки в определенной команде скрипт продолжил свою работу?


1 вариант: указать `|| true` после выполнения команды с ошибкой.

```shell
<command with error> || true
```

2 вариант: до выполнения данной команды указать `set +e` для игнорирования ошибок, начиная со следующей строки и после выполнения команды указать `set -e` для завершения работы скрипта в случае ошибки, начиная со следующей строки.

```shell
set -e
<command 1>
<command 2>
set +e
<command 3 wih error>
set -e
```

---
# Представьте ситуацию, что кто-то снял флаг +_****_X_** **_с файла_** **_chown_** **_(теперь файл стал неисполняемым), как все починить?

1 - Скопировать файл с аналогичного дистрибутива

2 - Воспользоваться системным вызовом и вернуть права на исполнение(например библиотека SYS в Python)

3 - При помощи связки cat и echo скопировать содержимое chmod в другой исполняемый файл

4 - Переустановить пакет Coreutils

---
# После удаления файла из системы не стало больше свободного места, что произошло и как вернуть свободное место?

Скорее всего файл держит какой нибудь процесс, если процесс не критический – перезагрузить процесс, если процесс критический – при помощи lsof найти дескриптор и обнулить

---


В чем разница между виртуализацией и контейнеризацией?

В чем преимущества контейнеров?